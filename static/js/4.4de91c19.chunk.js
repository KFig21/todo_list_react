(this.webpackJsonptodo_list_react=this.webpackJsonptodo_list_react||[]).push([[4],{56:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O}));var c=n(60),s=n(51),a=n.n(s),i=n(52),r=n(19);function o(e){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").where("username","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.length>0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").where("userId","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").doc(t).collection("lists").get();case 2:return n=(n=e.sent).docs.map((function(e){return Object(c.a)({},e.data())})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(t,n,c){var s,i,o,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").doc(n);case 2:s=e.sent,i=s.collection("lists").doc(t),o=i.collection("tasks").doc(),l=s.collection("tasks").doc(),u=Date.now(),o.set({taskName:c,dateCreated:u,completed:!1,due:u,urgent:!1,taskIdList:o.id,taskIdMain:l.id}),l.set({taskName:c,dateCreated:u,completed:!1,due:u,urgent:!1,taskIdList:o.id,taskIdMain:l.id});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t,n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").doc(t).collection("lists").doc();case 2:(c=e.sent).set({listName:n,dateCreated:Date.now(),listId:c.id});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},66:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},78:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));var c=n(51),s=n.n(c),a=n(52),i=n(26),r=n(1),o=n(28),l=n(56);n(66);var u=n(4),d=n(16),j=n(61),b=n.n(j),f=(n(67),n(8));function p(e){var t=e.lists,n=e.setCurrentList,c=e.userInfo,s=e.sidebarOpen,a=e.setSidebarOpen,o=e.user,j=Object(r.useState)(""),p=Object(i.a)(j,2),O=p[0],h=p[1],x=""===O,m=Object(r.useContext)(d.a).firebase,v=Object(u.f)();return Object(f.jsxs)("div",{className:"sidebar "+(s&&"active"),children:[Object(f.jsxs)("div",{className:"sidebar-list",children:[t.map((function(e,t){return Object(f.jsx)("div",{className:"sidebar-list-item",children:Object(f.jsx)("span",{className:"list-name",onClick:function(){return function(e){n(e),a(!1)}(e)},children:e.listName})},"sidebar-".concat(t))})),o&&Object(f.jsxs)("form",{className:"add",children:[Object(f.jsx)("button",{disabled:x,type:"submit",onClick:function(e){e.preventDefault(),Object(l.a)(c.docId,O),h("")},children:Object(f.jsx)(b.a,{className:"add-icon"})}),Object(f.jsx)("input",{placeholder:"Add a list",value:O,maxLength:20,onChange:function(e){return h(e.target.value)}})]})]}),o&&Object(f.jsx)("button",{className:"signout",onClick:function(){return m.auth().signOut(),void v.push("/login")},onKeyDown:function(e){"enter"===e.key&&(v.push("/login"),m.auth().signOut())},children:"Signout"})]})}var O=n(27),h=(n(69),n(19)),x=n(70),m=n.n(x),v=n(71),k=n.n(v);function N(e){var t=e.list,n=e.userInfo,c=e.sidebarOpen,s=e.setSidebarOpen,a=e.showListEdit,l=e.setShowListEdit,u=e.setShowDeleteList,d=Object(r.useContext)(o.a).user,j=Object(r.useState)(t.listName),b=Object(i.a)(j,2),p=b[0],x=b[1];Object(r.useEffect)((function(){h.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).onSnapshot((function(e){e.data()?x(e.data().listName):x(p)}))}),[t]);return Object(f.jsx)("div",{className:"navbar",children:Object(f.jsxs)("div",{className:"relative",children:[Object(f.jsx)("div",{className:"left",children:Object(f.jsx)("div",{className:"hamburger",onClick:function(){return s(!c)},children:Object(f.jsx)(m.a,{className:"icon"})})}),Object(f.jsx)("div",{className:"middle",children:Object(f.jsx)(O.b,{className:"link-title",to:"/",children:void 0===p?Object(f.jsx)("h2",{}):Object(f.jsx)("h2",{children:"".concat(p)})})}),Object(f.jsxs)("div",{className:"right",children:[!d&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(O.b,{to:"/login",children:Object(f.jsx)("button",{children:"Login"})}),Object(f.jsx)(O.b,{to:"/signup",children:Object(f.jsx)("button",{children:"Signup"})})]}),d&&Object(f.jsx)(k.a,{className:"edit-list-icon",onClick:function(){return l(!a),void u(!1)}})]})]})})}n(72),n(73),n(74);var I=n(62),w=n.n(I),S=n(59),g=n.n(S);function C(e){var t=e.task,n=e.userInfo,c=e.list,o=e.showEdit,l=e.setShowEdit,u=Object(r.useState)(""),d=Object(i.a)(u,2),j=d[0],b=d[1],p=Object(r.useState)(""),O=Object(i.a)(p,2),x=O[0],m=O[1];function v(e){return new Date(e).toLocaleDateString("en-US")}var k=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("users").doc(n.docId).collection("lists").doc(c.listId).collection("tasks").doc(t.taskIdList).update({taskName:j});case 2:return e.next=4,h.b.collection("users").doc(n.docId).collection("tasks").doc(t.taskIdMain).update({taskName:j});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("users").doc(n.docId).collection("lists").doc(c.listId).collection("tasks").doc(t.taskIdList).update({due:x});case 2:return e.next=4,h.b.collection("users").doc(n.docId).collection("tasks").doc(t.taskIdMain).update({due:x});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:o?"edit-item":"edit-item inactive",children:[Object(f.jsx)(g.a,{className:"close-edit",onClick:function(){return l(!o)}}),Object(f.jsxs)("div",{className:"info",children:[Object(f.jsx)("p",{children:"Task:"}),Object(f.jsxs)("div",{className:"edit-input",children:[Object(f.jsx)("input",{type:"text",placeholder:"".concat(t.taskName),onChange:function(e){return b(e.target.value)}}),Object(f.jsx)(w.a,{className:"save-icon",onClick:function(){return k()}})]}),Object(f.jsx)("p",{children:"Due:"}),Object(f.jsxs)("div",{className:"edit-input",children:[Object(f.jsx)("input",{type:"text",onFocus:function(e){e.currentTarget.type="date",e.currentTarget.focus()},placeholder:"".concat(v(t.due)),onChange:function(e){return m(e.target.value)}}),Object(f.jsx)(w.a,{className:"save-icon",onClick:function(){return N()}})]}),Object(f.jsx)("p",{children:"Created:"}),Object(f.jsx)("p",{children:v(t.dateCreated)}),Object(f.jsx)("p",{children:"Status:"}),t.completed?Object(f.jsx)("p",{className:"completed-p",children:"Completed"}):Object(f.jsx)("p",{children:"Incomplete"}),Object(f.jsx)("p",{children:"Priority:"}),t.urgent?Object(f.jsx)("p",{className:"urgent-p",children:"HIGH"}):Object(f.jsx)("p",{children:"Low"})]})]})}n(75);function y(e){var t=e.handleDeleteTask,n=(e.showDelete,e.setShowDelete);return Object(f.jsxs)("div",{className:"delete-item",children:[Object(f.jsx)("button",{className:"cancel",onClick:function(){n((function(e){return!e}))},children:"Cancel"}),Object(f.jsx)("button",{className:"delete",onClick:function(){return t(),void n((function(e){return!e}))},children:"Delete"})]})}var L=n(63),D=n.n(L),E=n(64),T=n.n(E),M=n(76),_=n.n(M);function F(e){var t,n=e.task,c=e.userInfo,o=e.list,l=e.completed,u=(e.sort,e.index),d=Object(r.useState)(l),j=Object(i.a)(d,2),b=j[0],p=j[1],O=Object(r.useState)(n.urgent),x=Object(i.a)(O,2),m=x[0],v=x[1],k=Object(r.useState)(!1),N=Object(i.a)(k,2),I=N[0],w=N[1],S=Object(r.useState)(!1),L=Object(i.a)(S,2),E=L[0],M=L[1],F=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p((function(e){return!e})),e.next=3,h.b.collection("users").doc(c.docId).collection("lists").doc(o.listId).collection("tasks").doc(n.taskIdList).update({completed:!b});case 3:return e.next=5,h.b.collection("users").doc(c.docId).collection("tasks").doc(n.taskIdMain).update({completed:!b});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v((function(e){return!e})),e.next=3,h.b.collection("users").doc(c.docId).collection("lists").doc(o.listId).collection("tasks").doc(n.taskIdList).update({urgent:!m});case 3:return e.next=5,h.b.collection("users").doc(c.docId).collection("tasks").doc(n.taskIdMain).update({urgent:!m});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("users").doc(c.docId).collection("lists").doc(o.listId).collection("tasks").doc(n.taskIdList).delete();case 2:return e.next=4,h.b.collection("users").doc(c.docId).collection("tasks").doc(n.taskIdMain).delete();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"list-item-container",children:[Object(f.jsxs)("div",{className:"list-item",children:[Object(f.jsxs)("div",{className:"left",children:[Object(f.jsx)("div",{className:"icon-container",onClick:F,children:Object(f.jsx)(D.a,{className:"".concat(n.completed,"-completed")})}),Object(f.jsx)("div",{className:"icon-container",onClick:U,children:Object(f.jsx)(T.a,{className:"".concat(n.urgent,"-urgent")})}),Object(f.jsxs)("p",{className:"task",onClick:function(){return w((function(e){return!e}))},children:[n.taskName,Object(f.jsx)(_.a,{className:"create-icon"})]})]}),Object(f.jsxs)("div",{className:"right",children:[Object(f.jsxs)("p",{className:"date",onClick:function(){return w((function(e){return!e}))},children:[Object(f.jsx)(_.a,{className:"create-icon"}),(t=n.due,new Date(t).toLocaleDateString("en-US",{timeZone:"UTC"}))]}),Object(f.jsx)("div",{className:"icon-container",onClick:function(){return M((function(e){return!e}))},children:Object(f.jsx)(g.a,{className:"closeIcon"})})]})]}),I&&Object(f.jsx)("div",{className:"edit-contianer",children:Object(f.jsx)(C,{task:n,userInfo:c,list:o,showEdit:I,setShowEdit:w})}),E&&Object(f.jsx)("div",{className:"edit-contianer",children:Object(f.jsx)(y,{handleDeleteTask:A,showDelete:E,setShowDelete:M})})]},u)}var U=n(77),A=n.n(U);function B(e){var t=e.list,n=e.userInfo,c=e.tasks,s=e.setTasks,a=e.setShowListEdit,o=e.setShowDeleteList,u=Object(r.useState)(""),d=Object(i.a)(u,2),j=d[0],p=d[1],O=""===j;Object(r.useEffect)((function(){h.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).collection("tasks").orderBy("due","asc").onSnapshot((function(e){console.log("update"),s(e.docs.map((function(e){return e.data()})))}))}),[t]);var x=function(e,t){s(c.filter((function(n){return n[e]===t})))};return Object(f.jsx)(r.Suspense,{fallback:Object(f.jsx)("p",{className:"suspense",children:"loading..."}),children:Object(f.jsxs)("div",{className:"list",onClick:function(){return a(!1),void o(!1)},children:[void 0!==t.listId&&Object(f.jsxs)("form",{className:"add",children:[Object(f.jsx)("button",{disabled:O,type:"submit",onClick:function(e){e.preventDefault(),Object(l.b)(t.listId,n.docId,j),p("")},children:Object(f.jsx)(b.a,{className:"add-icon"})}),Object(f.jsx)("input",{placeholder:"Add a task",value:j,onChange:function(e){return p(e.target.value)}})]}),Object(f.jsx)("div",{className:"tasks-container",children:c.map((function(e,c){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(F,{task:e,userInfo:n,list:t,completed:e.completed,index:c})})}))}),Object(f.jsxs)("div",{className:"filterbar",children:[Object(f.jsx)("button",{onClick:function(){return x("completed",!1)},children:Object(f.jsx)(D.a,{className:"incomplete-filter"})}),Object(f.jsx)("button",{onClick:function(){return x("completed",!0)},children:Object(f.jsx)(D.a,{className:"completed-filter"})}),Object(f.jsx)("button",{onClick:function(){return x("urgent",!0)},children:Object(f.jsx)(T.a,{className:"priority-filter"})}),Object(f.jsx)("button",{className:"refresh-button",onClick:function(){h.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).collection("tasks").orderBy("due","asc").onSnapshot((function(e){console.log("refresh-----"),s(e.docs.map((function(e){return e.data()})))}))},children:Object(f.jsx)(A.a,{className:"refresh"})})]})]})})}n(78);function H(e){var t=e.list,n=e.userInfo,c=e.showListEdit,o=e.setShowListEdit,l=e.showDeleteList,u=e.setShowDeleteList,d=e.setSidebarOpen,j=e.setTasks,b=Object(r.useState)(""),p=Object(i.a)(b,2),O=p[0],x=p[1],m=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).update({listName:O});case 2:x(""),o(!c),u(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).delete();case 2:x(""),o(!c),u(!1),d(!0),j([]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:c?"edit-list active":"edit-list",children:[Object(f.jsxs)("div",{className:"edit-container",children:[Object(f.jsx)("p",{children:"Name:"}),Object(f.jsxs)("div",{className:"edit-input",children:[Object(f.jsx)("input",{type:"text",maxLength:20,placeholder:"".concat(t.listName),onChange:function(e){return x(e.target.value)}}),Object(f.jsx)(w.a,{className:"save-icon",onClick:function(){return m()}})]}),Object(f.jsx)("div",{className:"delete-container",children:Object(f.jsx)(g.a,{className:"delete-icon",onClick:function(){return u(!l)}})})]}),Object(f.jsxs)("div",{className:l?"delete-list show":"delete-list",children:[Object(f.jsx)("button",{className:"cancel",onClick:function(){u((function(e){return!e}))},children:"Cancel"}),Object(f.jsx)("button",{className:"delete",onClick:function(){return v()},children:"Delete"})]})]})}function J(){var e={listName:"",tasks:[{taskName:"none"}]},t=[e,{listName:"",tasks:[{taskName:"none"}]}],n=Object(r.useContext)(o.a).user,c=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(r.useContext)(o.a).user;return Object(r.useEffect)((function(){function e(){return(e=Object(a.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.e)(u.uid);case 2:t=e.sent,n=Object(i.a)(t,1),a=n[0],c(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===u||void 0===u?void 0:u.uid)&&function(){e.apply(this,arguments)}()}),[u]),{userInfo:n}}().userInfo,d=Object(r.useState)(t),j=Object(i.a)(d,2),b=j[0],O=j[1],x=Object(r.useState)(e),m=Object(i.a)(x,2),v=m[0],k=m[1],I=Object(r.useState)([]),w=Object(i.a)(I,2),S=w[0],g=w[1],C=Object(r.useState)(!0),y=Object(i.a)(C,2),L=y[0],D=y[1],E=Object(r.useState)(!1),T=Object(i.a)(E,2),M=T[0],_=T[1],F=Object(r.useState)(!1),U=Object(i.a)(F,2),A=U[0],J=U[1],G=Object(u.f)();return Object(r.useEffect)((function(){function e(){return(e=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)(c.docId);case 2:if(!(t=e.sent)){e.next=7;break}O(t),e.next=8;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),k(b[0])}),[c.docId]),Object(r.useEffect)((function(){h.b.collection("users").doc(c.docId).collection("lists").onSnapshot((function(e){O(e.docs.map((function(e){return e.data()})))}))}),[v]),Object(r.useEffect)((function(){n||G.push("/login")}),[n]),Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)(N,{list:v,userInfo:c,sidebarOpen:L,setSidebarOpen:D,showListEdit:M,setShowListEdit:_,setShowDeleteList:J}),Object(f.jsx)(H,{list:v,userInfo:c,showListEdit:M,setShowListEdit:_,showDeleteList:A,setShowDeleteList:J,setSidebarOpen:D,setTasks:g}),Object(f.jsx)(p,{lists:b,setCurrentList:k,userInfo:c,sidebarOpen:L,setSidebarOpen:D,user:n}),Object(f.jsx)(B,{list:v,userInfo:c,tasks:S,setTasks:g,setShowListEdit:_,setShowDeleteList:J})]})}}}]);
//# sourceMappingURL=4.4de91c19.chunk.js.map