(this.webpackJsonptodo_list_react=this.webpackJsonptodo_list_react||[]).push([[4],{56:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O}));var c=n(60),s=n(51),a=n.n(s),i=n(52),r=n(19);function o(e){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").where("username","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.length>0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").where("userId","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return Object(c.a)(Object(c.a)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").doc(t).collection("lists").get();case 2:return n=(n=e.sent).docs.map((function(e){return Object(c.a)({},e.data())})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(t,n,c){var s,i,o,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").doc(n);case 2:s=e.sent,i=s.collection("lists").doc(t),o=i.collection("tasks").doc(),l=s.collection("tasks").doc(),u=Date.now(),o.set({taskName:c,dateCreated:u,completed:!1,due:u,urgent:!1,taskIdList:o.id,taskIdMain:l.id}),l.set({taskName:c,dateCreated:u,completed:!1,due:u,urgent:!1,taskIdList:o.id,taskIdMain:l.id});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t,n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.c.firestore().collection("users").doc(t).collection("lists").doc();case 2:(c=e.sent).set({listName:n,dateCreated:Date.now(),listId:c.id});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},66:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},78:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));var c=n(51),s=n.n(c),a=n(52),i=n(26),r=n(1),o=n(4),l=(n(66),n(28)),u=n(56);var d=n(19),j=(n(67),n(16)),b=n(61),f=n.n(b),p=n(8);function O(e){var t=e.lists,n=e.setCurrentList,c=e.userInfo,s=e.sidebarOpen,a=e.setSidebarOpen,l=e.user,d=Object(r.useState)(""),b=Object(i.a)(d,2),O=b[0],h=b[1],x=""===O,m=Object(r.useContext)(j.a).firebase,v=Object(o.f)();return Object(p.jsxs)("div",{className:"sidebar "+(s&&"active"),children:[Object(p.jsxs)("div",{className:"sidebar-list",children:[t.map((function(e,t){return Object(p.jsx)("div",{className:"sidebar-list-item",children:Object(p.jsx)("span",{className:"list-name",onClick:function(){return function(e){n(e),a(!1)}(e)},children:e.listName})},"sidebar-".concat(t))})),l&&Object(p.jsxs)("form",{className:"add",children:[Object(p.jsx)("button",{disabled:x,type:"submit",onClick:function(e){e.preventDefault(),Object(u.a)(c.docId,O),h("")},children:Object(p.jsx)(f.a,{className:"add-icon"})}),Object(p.jsx)("input",{placeholder:"Add a list",value:O,maxLength:20,onChange:function(e){return h(e.target.value)}})]})]}),l&&Object(p.jsx)("button",{className:"signout",onClick:function(){return m.auth().signOut(),void v.push("/login")},onKeyDown:function(e){"enter"===e.key&&(v.push("/login"),m.auth().signOut())},children:"Signout"})]})}var h=n(27),x=(n(69),n(70)),m=n.n(x),v=n(71),k=n.n(v);function N(e){var t=e.list,n=e.userInfo,c=e.sidebarOpen,s=e.setSidebarOpen,a=e.showListEdit,o=e.setShowListEdit,u=e.setShowDeleteList,j=Object(r.useContext)(l.a).user,b=Object(r.useState)(t.listName),f=Object(i.a)(b,2),O=f[0],x=f[1];Object(r.useEffect)((function(){d.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).onSnapshot((function(e){e.data()?x(e.data().listName):x(O)}))}),[t]);return Object(p.jsx)("div",{className:"navbar",children:Object(p.jsxs)("div",{className:"relative",children:[Object(p.jsx)("div",{className:"left",children:Object(p.jsx)("div",{className:"hamburger",onClick:function(){return s(!c)},children:Object(p.jsx)(m.a,{className:"icon"})})}),Object(p.jsx)("div",{className:"middle",children:Object(p.jsx)(h.b,{className:"link-title",to:"/",children:void 0===O?Object(p.jsx)("h2",{children:" "}):Object(p.jsx)("h2",{children:"".concat(O)})})}),Object(p.jsxs)("div",{className:"right",children:[!j&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h.b,{to:"/login",children:Object(p.jsx)("button",{children:"Login"})}),Object(p.jsx)(h.b,{to:"/signup",children:Object(p.jsx)("button",{children:"Signup"})})]}),j&&Object(p.jsx)(k.a,{className:"edit-list-icon",onClick:function(){return o(!a),void u(!1)}})]})]})})}n(72),n(73),n(74);var I=n(62),w=n.n(I),S=n(59),g=n.n(S);function C(e){var t=e.task,n=e.userInfo,c=e.list,o=e.showEdit,l=e.setShowEdit,u=Object(r.useState)(""),j=Object(i.a)(u,2),b=j[0],f=j[1],O=Object(r.useState)(""),h=Object(i.a)(O,2),x=h[0],m=h[1];function v(e){return new Date(e).toLocaleDateString("en-US")}var k=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.collection("users").doc(n.docId).collection("lists").doc(c.listId).collection("tasks").doc(t.taskIdList).update({taskName:b});case 2:return e.next=4,d.b.collection("users").doc(n.docId).collection("tasks").doc(t.taskIdMain).update({taskName:b});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.collection("users").doc(n.docId).collection("lists").doc(c.listId).collection("tasks").doc(t.taskIdList).update({due:x});case 2:return e.next=4,d.b.collection("users").doc(n.docId).collection("tasks").doc(t.taskIdMain).update({due:x});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:o?"edit-item":"edit-item inactive",children:[Object(p.jsx)(g.a,{className:"close-edit",onClick:function(){return l(!o)}}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("p",{children:"Task:"}),Object(p.jsxs)("div",{className:"edit-input",children:[Object(p.jsx)("input",{type:"text",placeholder:"".concat(t.taskName),onChange:function(e){return f(e.target.value)}}),Object(p.jsx)(w.a,{className:"save-icon",onClick:function(){return k()}})]}),Object(p.jsx)("p",{children:"Due:"}),Object(p.jsxs)("div",{className:"edit-input",children:[Object(p.jsx)("input",{type:"text",onFocus:function(e){e.currentTarget.type="date",e.currentTarget.focus()},placeholder:"".concat(v(t.due)),onChange:function(e){return m(e.target.value)}}),Object(p.jsx)(w.a,{className:"save-icon",onClick:function(){return N()}})]}),Object(p.jsx)("p",{children:"Created:"}),Object(p.jsx)("p",{children:v(t.dateCreated)}),Object(p.jsx)("p",{children:"Status:"}),t.completed?Object(p.jsx)("p",{className:"completed-p",children:"Completed"}):Object(p.jsx)("p",{children:"Incomplete"}),Object(p.jsx)("p",{children:"Priority:"}),t.urgent?Object(p.jsx)("p",{className:"urgent-p",children:"HIGH"}):Object(p.jsx)("p",{children:"Low"})]})]})}n(75);function y(e){var t=e.handleDeleteTask,n=(e.showDelete,e.setShowDelete);return Object(p.jsxs)("div",{className:"delete-item",children:[Object(p.jsx)("button",{className:"cancel",onClick:function(){n((function(e){return!e}))},children:"Cancel"}),Object(p.jsx)("button",{className:"delete",onClick:function(){return t(),void n((function(e){return!e}))},children:"Delete"})]})}var L=n(63),D=n.n(L),E=n(64),T=n.n(E),M=n(76),_=n.n(M);function F(e){var t,n=e.task,c=e.userInfo,o=e.list,l=e.completed,u=(e.sort,e.index),j=Object(r.useState)(l),b=Object(i.a)(j,2),f=b[0],O=b[1],h=Object(r.useState)(n.urgent),x=Object(i.a)(h,2),m=x[0],v=x[1],k=Object(r.useState)(!1),N=Object(i.a)(k,2),I=N[0],w=N[1],S=Object(r.useState)(!1),L=Object(i.a)(S,2),E=L[0],M=L[1],F=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O((function(e){return!e})),e.next=3,d.b.collection("users").doc(c.docId).collection("lists").doc(o.listId).collection("tasks").doc(n.taskIdList).update({completed:!f});case 3:return e.next=5,d.b.collection("users").doc(c.docId).collection("tasks").doc(n.taskIdMain).update({completed:!f});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v((function(e){return!e})),e.next=3,d.b.collection("users").doc(c.docId).collection("lists").doc(o.listId).collection("tasks").doc(n.taskIdList).update({urgent:!m});case 3:return e.next=5,d.b.collection("users").doc(c.docId).collection("tasks").doc(n.taskIdMain).update({urgent:!m});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.collection("users").doc(c.docId).collection("lists").doc(o.listId).collection("tasks").doc(n.taskIdList).delete();case 2:return e.next=4,d.b.collection("users").doc(c.docId).collection("tasks").doc(n.taskIdMain).delete();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"list-item-container",children:[Object(p.jsxs)("div",{className:"list-item",children:[Object(p.jsxs)("div",{className:"left",children:[Object(p.jsx)("div",{className:"icon-container",onClick:F,children:Object(p.jsx)(D.a,{className:"".concat(n.completed,"-completed")})}),Object(p.jsx)("div",{className:"icon-container",onClick:U,children:Object(p.jsx)(T.a,{className:"".concat(n.urgent,"-urgent")})}),Object(p.jsxs)("p",{className:"task",onClick:function(){return w((function(e){return!e}))},children:[n.taskName,Object(p.jsx)(_.a,{className:"create-icon"})]})]}),Object(p.jsxs)("div",{className:"right",children:[Object(p.jsxs)("p",{className:"date",onClick:function(){return w((function(e){return!e}))},children:[Object(p.jsx)(_.a,{className:"create-icon"}),(t=n.due,new Date(t).toLocaleDateString("en-US",{timeZone:"UTC"}))]}),Object(p.jsx)("div",{className:"icon-container",onClick:function(){return M((function(e){return!e}))},children:Object(p.jsx)(g.a,{className:"closeIcon"})})]})]}),I&&Object(p.jsx)("div",{className:"edit-contianer",children:Object(p.jsx)(C,{task:n,userInfo:c,list:o,showEdit:I,setShowEdit:w})}),E&&Object(p.jsx)("div",{className:"edit-contianer",children:Object(p.jsx)(y,{handleDeleteTask:A,showDelete:E,setShowDelete:M})})]},u)}var U=n(77),A=n.n(U);function B(e){var t=e.list,n=e.userInfo,c=e.tasks,s=e.setTasks,a=e.setShowListEdit,o=e.setShowDeleteList,l=e.setSidebarOpen,j=Object(r.useState)(""),b=Object(i.a)(j,2),O=b[0],h=b[1],x=""===O;Object(r.useEffect)((function(){d.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).collection("tasks").orderBy("due","asc").onSnapshot((function(e){console.log("update"),s(e.docs.map((function(e){return e.data()})))}))}),[t]);var m=function(e,t){s(c.filter((function(n){return n[e]===t})))};return Object(p.jsx)(r.Suspense,{fallback:Object(p.jsx)("p",{className:"suspense",children:"loading..."}),children:Object(p.jsxs)("div",{className:"list",onClick:function(){return a(!1),o(!1),void l(!1)},children:[void 0!==t.listId&&Object(p.jsxs)("form",{className:"add",children:[Object(p.jsx)("button",{disabled:x,type:"submit",onClick:function(e){e.preventDefault(),Object(u.b)(t.listId,n.docId,O),h("")},children:Object(p.jsx)(f.a,{className:"add-icon"})}),Object(p.jsx)("input",{placeholder:"Add a task",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(p.jsx)("div",{className:"tasks-container",children:c.map((function(e,c){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(F,{task:e,userInfo:n,list:t,completed:e.completed,index:c})})}))}),Object(p.jsxs)("div",{className:"filterbar",children:[Object(p.jsx)("button",{onClick:function(){return m("completed",!1)},children:Object(p.jsx)(D.a,{className:"incomplete-filter"})}),Object(p.jsx)("button",{onClick:function(){return m("completed",!0)},children:Object(p.jsx)(D.a,{className:"completed-filter"})}),Object(p.jsx)("button",{onClick:function(){return m("urgent",!0)},children:Object(p.jsx)(T.a,{className:"priority-filter"})}),Object(p.jsx)("button",{className:"refresh-button",onClick:function(){d.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).collection("tasks").orderBy("due","asc").onSnapshot((function(e){console.log("refresh-----"),s(e.docs.map((function(e){return e.data()})))}))},children:Object(p.jsx)(A.a,{className:"refresh"})})]})]})})}n(78);function H(e){var t=e.list,n=e.userInfo,c=e.showListEdit,o=e.setShowListEdit,l=e.showDeleteList,u=e.setShowDeleteList,j=e.setSidebarOpen,b=e.setTasks,f=Object(r.useState)(""),O=Object(i.a)(f,2),h=O[0],x=O[1],m=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).update({listName:h});case 2:x(""),o(!c),u(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.collection("users").doc(n.docId).collection("lists").doc(t.listId).delete();case 2:x(""),o(!c),u(!1),j(!0),b([]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:c?"edit-list active":"edit-list",children:[Object(p.jsxs)("div",{className:"edit-container",children:[Object(p.jsx)("p",{children:"Name:"}),Object(p.jsxs)("div",{className:"edit-input",children:[Object(p.jsx)("input",{type:"text",maxLength:20,placeholder:"".concat(t.listName),onChange:function(e){return x(e.target.value)}}),Object(p.jsx)(w.a,{className:"save-icon",onClick:function(){return m()}})]}),Object(p.jsx)("div",{className:"delete-container",children:Object(p.jsx)(g.a,{className:"delete-icon",onClick:function(){return u(!l)}})})]}),Object(p.jsxs)("div",{className:l?"delete-list show":"delete-list",children:[Object(p.jsx)("button",{className:"cancel",onClick:function(){u((function(e){return!e}))},children:"Cancel"}),Object(p.jsx)("button",{className:"delete",onClick:function(){return v()},children:"Delete"})]})]})}function J(){var e={listName:"",tasks:[{taskName:"none"}]},t=[e,{listName:"",tasks:[{taskName:"none"}]}],n=Object(r.useState)(t),c=Object(i.a)(n,2),j=c[0],b=c[1],f=Object(r.useState)(e),h=Object(i.a)(f,2),x=h[0],m=h[1],v=Object(r.useContext)(l.a).user,k=function(){var e=Object(r.useState)({}),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(r.useContext)(l.a).user;return Object(r.useEffect)((function(){function e(){return(e=Object(a.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.e)(o.uid);case 2:t=e.sent,n=Object(i.a)(t,1),a=n[0],c(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(null===o||void 0===o?void 0:o.uid)&&function(){e.apply(this,arguments)}()}),[o]),{userInfo:n}}().userInfo,I=Object(r.useState)([]),w=Object(i.a)(I,2),S=w[0],g=w[1],C=Object(r.useState)(!0),y=Object(i.a)(C,2),L=y[0],D=y[1],E=Object(r.useState)(!1),T=Object(i.a)(E,2),M=T[0],_=T[1],F=Object(r.useState)(!1),U=Object(i.a)(F,2),A=U[0],J=U[1],G=Object(o.f)();return Object(r.useEffect)((function(){function e(){return(e=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)(k.docId);case 2:if(!(t=e.sent)){e.next=7;break}b(t),e.next=8;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),m(j[0])}),[k.docId]),Object(r.useEffect)((function(){d.b.collection("users").doc(k.docId).collection("lists").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))}),[x]),Object(r.useEffect)((function(){v||G.push("/login")}),[v]),Object(r.useEffect)((function(){""===x.listName?document.title="To Do":document.title="To Do - ".concat(x.listName)}),[x]),Object(p.jsxs)("div",{className:"main",children:[Object(p.jsx)(N,{list:x,userInfo:k,sidebarOpen:L,setSidebarOpen:D,showListEdit:M,setShowListEdit:_,setShowDeleteList:J}),Object(p.jsx)(H,{list:x,userInfo:k,showListEdit:M,setShowListEdit:_,showDeleteList:A,setShowDeleteList:J,setSidebarOpen:D,setTasks:g}),Object(p.jsx)(O,{lists:j,setCurrentList:m,userInfo:k,sidebarOpen:L,setSidebarOpen:D,user:v}),Object(p.jsx)(B,{list:x,userInfo:k,tasks:S,setTasks:g,setShowListEdit:_,setShowDeleteList:J,setSidebarOpen:D})]})}}}]);
//# sourceMappingURL=4.b089cd42.chunk.js.map