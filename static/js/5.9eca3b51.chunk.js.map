{"version":3,"sources":["services/firebase.js","hooks/use-user.js","components/navbar/Navbar.js","pages/login/Login.js"],"names":["doesUsernameExist","username","a","firebase","firestore","collection","where","get","result","docs","length","getUserByUserId","userId","map","item","data","docId","id","getListsByDocId","doc","addTask","listId","input","userDocRef","listsDocRef","tasksInListDocRef","tasksMainDocRef","dateCreated","Date","now","set","taskName","completed","due","urgent","taskIdList","taskIdMain","addList","listDocRef","listName","useUser","useState","activeUser","setActiveUser","user","useContext","UserContext","useEffect","uid","response","getUserObjByUserId","userInfo","Navbar","title","sidebarOpen","setSidebarOpen","FirebaseContext","navTitle","useHistory","undefined","className","onClick","to","Login","history","emailAddress","setEmailAddress","password","setPassword","error","setError","isInvalid","buttonClass","setButtonClass","handleLogin","e","preventDefault","auth","signInWithEmailAndPassword","push","ROUTES","message","document","onSubmit","type","placeholder","onChange","target","value","disabled"],"mappings":"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","file":"static/js/5.9eca3b51.chunk.js","sourcesContent":["import { firebase, FieldValue } from \"../lib/firebase\";\r\n\r\nexport async function doesUsernameExist(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"username\", \"==\", username)\r\n    .get();\r\n\r\n  return result.docs.length > 0;\r\n}\r\n\r\nexport async function getUserByUsername(username) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"username\", \"==\", username)\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id,\r\n  }));\r\n}\r\n\r\n// get user from the firestore wher userId == userId(passed from the auth) 笨能r\nexport async function getUserByUserId(userId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .where(\"userId\", \"==\", userId)\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id,\r\n  }));\r\n}\r\n\r\n// get lists (plural) 笨能r\nexport async function getListsByDocId(docId) {\r\n  let result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .doc(docId)\r\n    .collection(\"lists\")\r\n    .get();\r\n\r\n  result = result.docs.map((item) => ({\r\n    ...item.data(),\r\n  }));\r\n\r\n  return result;\r\n}\r\n\r\n// get tasks 笨能r\nexport async function getTasksFromListId(listId, userId) {\r\n  const result = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .doc(userId)\r\n    .collection(\"lists\")\r\n    .doc(listId)\r\n    .collection(\"tasks\")\r\n    .get();\r\n\r\n  return result.docs.map((item) => ({\r\n    ...item.data(),\r\n    docId: item.id,\r\n  }));\r\n}\r\n\r\n// add task 笨能r\nexport async function addTask(listId, userId, input) {\r\n  // var taskDocRef = await firebase\r\n  // .firestore()\r\n  // .collection(\"users\")\r\n  // .doc(userId)\r\n  // .collection(\"lists\")\r\n  // .doc(listId)\r\n  // .collection(\"tasks\")\r\n  // .doc();\r\n\r\n  var userDocRef = await firebase.firestore().collection(\"users\").doc(userId);\r\n\r\n  var listsDocRef = userDocRef.collection(\"lists\").doc(listId);\r\n  var tasksInListDocRef = listsDocRef.collection(\"tasks\").doc();\r\n  var tasksMainDocRef = userDocRef.collection(\"tasks\").doc();\r\n  var dateCreated = Date.now();\r\n  // var dateCreated = new Date().toString().split(\" \").splice(1, 3).join(\" \");\r\n\r\n  tasksInListDocRef.set({\r\n    taskName: input,\r\n    dateCreated: dateCreated,\r\n    completed: false,\r\n    due: dateCreated,\r\n    urgent: false,\r\n    taskIdList: tasksInListDocRef.id,\r\n    taskIdMain: tasksMainDocRef.id,\r\n  });\r\n\r\n  tasksMainDocRef.set({\r\n    taskName: input,\r\n    dateCreated: dateCreated,\r\n    completed: false,\r\n    due: dateCreated,\r\n    urgent: false,\r\n    taskIdList: tasksInListDocRef.id,\r\n    taskIdMain: tasksMainDocRef.id,\r\n  });\r\n}\r\n\r\n// add list\r\nexport async function addList(userId, input) {\r\n  var listDocRef = await firebase\r\n    .firestore()\r\n    .collection(\"users\")\r\n    .doc(userId)\r\n    .collection(\"lists\")\r\n    .doc();\r\n\r\n  listDocRef.set({\r\n    listName: input,\r\n    dateCreated: Date.now(),\r\n    listId: listDocRef.id,\r\n  });\r\n}\r\n","import { useState, useEffect, useContext } from \"react\";\r\nimport UserContext from \"../context/user\";\r\nimport { getUserByUserId } from \"../services/firebase\";\r\n\r\nexport default function useUser() {\r\n  const [activeUser, setActiveUser] = useState({});\r\n  const { user } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    async function getUserObjByUserId() {\r\n      const [response] = await getUserByUserId(user.uid);\r\n      setActiveUser(response);\r\n    }\r\n\r\n    if (user?.uid) {\r\n      getUserObjByUserId();\r\n    }\r\n  }, [user]);\r\n\r\n  // returns userInfo variable, cannot return user variable as that is used in userContext\r\n  return { userInfo: activeUser };\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport \"./navbar.scss\";\r\nimport FirebaseContext from \"../../context/firebase\";\r\nimport UserContext from \"../../context/user\";\r\nimport useUser from \"../../hooks/use-user\";\r\n// icons\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n\r\nexport default function Navbar({ title, sidebarOpen, setSidebarOpen }) {\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const { user } = useContext(UserContext);\r\n  const { userInfo } = useUser();\r\n  const history = useHistory();\r\n  let navTitle = title === undefined ? \"To-Do List\" : title;\r\n\r\n  const handleSignOut = () => {\r\n    firebase.auth().signOut();\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"navbar\">\r\n      <div className=\"relative\">\r\n        <div className=\"left\">\r\n          <div\r\n            className=\"hamburger\"\r\n            onClick={() => setSidebarOpen(!sidebarOpen)}\r\n          >\r\n            <MenuIcon className=\"icon\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"middle\">\r\n          <Link className=\"link-title\" to=\"/\">\r\n            <h2>{`${navTitle}`}</h2>\r\n          </Link>\r\n        </div>\r\n        <div className=\"right\">\r\n          {!user && (\r\n            <>\r\n              <Link to=\"/login\">\r\n                <button>Login</button>\r\n              </Link>\r\n              <Link to=\"/signup\">\r\n                <button>Signup</button>\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import \"../signup/signup.scss\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport React, { useState, useContext, useEffect } from \"react\";\r\nimport FirebaseContext from \"../../context/firebase\";\r\nimport * as ROUTES from \"../../constants/routes\";\r\nimport Navbar from \"../../components/navbar/Navbar\";\r\n\r\nexport default function Login() {\r\n  const history = useHistory();\r\n  const { firebase } = useContext(FirebaseContext);\r\n  const [emailAddress, setEmailAddress] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const isInvalid = password === \"\" || emailAddress === \"\";\r\n  const [buttonClass, setButtonClass] = useState(\"disabled\");\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await firebase.auth().signInWithEmailAndPassword(emailAddress, password);\r\n      history.push(ROUTES.DASHBOARD);\r\n    } catch (error) {\r\n      setEmailAddress(\"\");\r\n      setPassword(\"\");\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    isInvalid ? setButtonClass(\"disabled\") : setButtonClass(\"able\");\r\n  }, [isInvalid]);\r\n\r\n  useEffect(() => {\r\n    document.title = \"Login - To Do\";\r\n  }, []);\r\n  return (\r\n    <>\r\n      {/* <Navbar /> */}\r\n\r\n      <div className=\"signup\">\r\n        <div className=\"container\">\r\n          <div className=\"modal\">\r\n            <h2>Login</h2>\r\n            {error && <p className=\"error\">{error}</p>}\r\n            <form onSubmit={handleLogin}>\r\n              {/* email */}\r\n              <input\r\n                aria-label=\"Enter your email address\"\r\n                type=\"test\"\r\n                placeholder=\"Email address\"\r\n                onChange={({ target }) => setEmailAddress(target.value)}\r\n                value={emailAddress}\r\n              />\r\n              {/* password */}\r\n              <input\r\n                aria-label=\"Enter your password\"\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={({ target }) => setPassword(target.value)}\r\n                value={password}\r\n              />\r\n              {/* login button */}\r\n              <button\r\n                className={buttonClass}\r\n                disabled={isInvalid}\r\n                type=\"submit\"\r\n              >\r\n                Login\r\n              </button>\r\n            </form>\r\n          </div>\r\n          <div className=\"already\">\r\n            Already have an account?{\" \"}\r\n            <Link to={ROUTES.SIGN_UP} className=\"link\">\r\n              Signup\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}